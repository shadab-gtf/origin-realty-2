"use client";

import { useEffect, useRef } from "react";
import gsap from "gsap";

export default function AnimatedLogo() {
  const svgRef = useRef<SVGSVGElement>(null);

  useEffect(() => {
    const ctx = gsap.context(() => {
      const paths = svgRef.current?.querySelectorAll("path");
      if (!paths) return;

      // Prepare paths
      paths.forEach((path) => {
        const length = path.getTotalLength();

        gsap.set(path, {
          strokeDasharray: length,
          strokeDashoffset: length,
          fill: "transparent",
          opacity: 1,
        });
      });

      // Master timeline
      const tl = gsap.timeline({
        defaults: { ease: "power2.out" },
      });

      // Draw animation
      tl.to(paths, {
        strokeDashoffset: 0,
        duration: 2.8,
        stagger: 0.12,
      });

      // Fill fade-in
      tl.to(
        paths,
        {
          fill: "#E0D1B6",
          duration: 0.8,
          ease: "power1.out",
        },
        "-=0.6"
      );

      // Stroke soften (luxury touch)
      tl.to(
        paths,
        {
          strokeOpacity: 0,
          duration: 0.6,
        },
        "-=0.4"
      );
    }, svgRef);

    return () => ctx.revert();
  }, []);

  return (
    <div className="w-fit">
      <svg
        ref={svgRef}
        width="300"
        height="99"
        viewBox="0 0 300 99"
        xmlns="http://www.w3.org/2000/svg"
        className="will-change-transform"
      >
        <path
          d="M187.627 88.5529C187.627 84.6624 189.197 82.0166 192.493 79.4771H208.487C215.023 79.4771 217.512 82.6671 217.512 86.2887C217.512 91.205 211.946 96.9907 200.812 96.9907C194 96.9845 187.627 94.176 187.627 88.5529ZM201.675 66.3983C195.351 66.3983 190.435 60.9941 190.435 53.5883C190.435 47.1021 194.595 42.242 200.649 42.242C206.917 42.242 211.946 47.5899 211.946 55.052C211.946 61.4819 207.73 66.3983 201.675 66.3983ZM64.4687 81.0409C59.8214 81.0409 57.063 79.0956 54.3108 76.1245V50.511C57.0129 46.7268 59.7713 43.6494 64.5813 43.6494C72.0371 43.6494 77.1723 51.4304 77.1723 62.4577C77.1661 73.2598 71.8182 81.0409 64.4687 81.0409ZM121.106 29.0005C121.106 31.3774 122.945 33.16 125.322 33.16C127.649 33.16 129.432 31.3774 129.432 29.0005C129.432 26.6237 127.649 24.8911 125.322 24.8911C122.939 24.8974 121.106 26.6237 121.106 29.0005ZM228.158 78.5577C231.836 80.8845 236.371 82.7734 241.4 82.7734C249.181 82.7734 255.285 78.3951 255.285 71.9651C255.285 67.5366 252.477 63.8588 247.123 61.1004L238.422 56.672C234.532 54.6704 232.587 52.1873 232.587 49.1036C232.587 45.2694 235.508 42.6736 240.749 42.6736C248.799 42.6736 251.933 47.6462 253.503 54.9957H254.747L253.722 44.8378C250.263 42.242 245.834 40.7284 241.4 40.7284C234.538 40.7284 228.158 44.2936 228.158 50.8862C228.158 55.2083 230.86 58.611 235.67 61.1004L244.371 65.5851C248.855 67.9119 250.907 70.6078 250.907 73.7477C250.907 77.7445 247.179 80.7219 242.1 80.7219C233.4 80.7219 229.997 75.424 228.533 67.9682H227.126L228.158 78.5577ZM155.746 81.6914V80.3403C150.723 80.234 149.691 79.9087 149.691 78.1761V55.2083L151.58 51.6931C154.282 46.6705 157.253 44.5063 160.875 44.5063C166.06 44.5063 168.925 48.3968 168.925 55.152V78.1699C168.925 79.8962 168.33 80.2215 162.983 80.3341V81.6851H179.251V80.3341C174.548 80.2277 173.954 79.9025 173.954 78.1699V54.3952C173.954 45.751 170.007 40.8285 163.145 40.8285C157.578 40.8285 153.525 44.2311 150.448 51.0989L149.472 53.2631H149.203L149.691 41.3226H148.665L138.989 42.7299V43.8621L142.823 44.1873C144.499 44.3499 144.606 44.6189 144.606 45.8073V78.1761C144.606 79.9025 144.012 80.2277 138.983 80.3403V81.6914H155.746ZM1.29475 76.7188C5.62311 80.5592 12.6973 82.9361 19.4526 82.9361C30.9115 82.9361 39.1741 76.7188 39.1741 68.1309C39.1741 62.564 35.8215 57.8604 28.6347 53.7009L13.3478 44.7815C8.6442 42.0231 6.42998 38.2952 6.42998 34.2984C6.42998 28.4063 11.2963 24.4095 18.2079 24.4095C28.7973 24.4095 34.4204 32.9473 36.0967 40.7284H37.3414L36.0467 28.4063C30.7488 24.6221 24.7004 22.5706 19.0773 22.5706C8.86312 22.5706 1.6763 28.35 1.6763 36.4063C1.6763 41.9168 4.80998 46.5141 10.971 50.1294L26.2641 59.0989C31.1304 61.9636 33.8325 65.7478 33.8325 70.1762C33.8325 76.3935 28.5909 80.8782 20.5409 80.8782C8.70675 80.8782 3.0336 73.9041 1.30101 63.5335H0L1.29475 76.7188ZM183.036 89.4223C183.036 95.746 190.654 98.986 199.086 98.986C214.379 98.986 222.16 90.7171 222.16 83.9619C222.16 79.2082 219.026 75.2051 210.538 75.2051H193.244C192.649 74.073 192.38 72.7219 192.38 71.3146C192.38 69.7446 192.756 68.1246 193.406 66.6672C195.514 67.5304 197.997 68.0183 200.756 68.0183C210.213 68.0183 216.912 62.2388 216.912 53.9136C216.912 48.941 214.429 44.9441 210.319 42.6736H221.071V38.4016H220.477C216.368 38.7769 212.152 40.4031 209.181 42.0732C207.017 41.1537 204.427 40.5595 201.613 40.5595C192.099 40.5595 185.344 46.339 185.344 54.7205C185.344 59.6931 187.939 63.7462 192.424 66.1793C190.698 68.5061 188.803 71.7462 188.803 74.5546C188.803 76.2809 189.503 77.7946 191.398 78.8266C187.464 81.0971 183.036 84.2871 183.036 89.4223ZM123.208 45.8073V78.1761C123.208 79.9025 122.614 80.2277 117.585 80.3403V81.6914H133.904V80.3403C129.313 80.234 128.281 79.9087 128.281 78.1761V41.3226H127.255L117.591 42.7299V43.8621L121.425 44.1873C123.102 44.3499 123.208 44.6189 123.208 45.8073ZM91.6523 45.8073V78.1761C91.6523 79.9025 91.0581 80.2277 86.467 80.3403V81.6914H106.351V80.3403C97.757 80.234 96.7312 79.9087 96.7312 78.1761V56.6657L98.8954 52.0747C100.947 47.7526 103.974 46.6142 108.515 46.6142H112.625V41.3726H109.979C104.737 41.3726 100.953 43.9121 98.3074 50.1294L96.5811 54.2388H96.0932L96.7437 41.3226H95.7179L86.0417 42.7299V43.8621L89.8759 44.1873C91.546 44.3499 91.6523 44.6189 91.6523 45.8073ZM49.3382 45.8073V94.2824C49.3382 96.0087 48.744 96.334 44.153 96.4465V97.7976H64.0371V96.4465C55.443 96.3402 54.3108 96.015 54.3108 94.2824V80.4466C57.6071 82.2293 60.8472 82.6609 64.1435 82.6609C74.6829 82.6609 82.5139 73.4224 82.5139 60.7189C82.5139 48.941 76.1403 40.5595 66.7893 40.5595C61.654 40.5595 58.1951 43.4242 55.0614 47.5837L54.5735 48.2342H54.3046V41.3226H53.2788L43.6025 42.7299V43.8621L47.4368 44.1873C49.1193 44.3499 49.3382 44.6189 49.3382 45.8073Z"
          fill="none"
          stroke="#E0D1B6"
          strokeWidth="1.2"
          strokeLinecap="round"
          strokeLinejoin="round"
        />
        <path
          d="M281.799 11.8977H278.828L285.838 7.29633V6.64331H283.581L277.5 12.2865L283.581 19.0168H285.838V18.3637L278.878 12.7621H281.844C290.658 12.7621 295.565 19.364 295.565 25.7886C295.565 31.9111 291.138 37.9053 281.584 37.9053C272.291 37.9053 264.519 32.2169 264.519 20.7531H263.65C263.65 33.7381 271.815 39.9474 281.584 39.9474C292.006 39.9474 297.347 32.8246 297.347 25.747C297.343 18.8016 292.176 11.8977 281.799 11.8977Z"
          fill="none"
          stroke="#E0D1B6"
          strokeWidth="1.2"
          strokeLinecap="round"
          strokeLinejoin="round"
        />
        <path
          d="M282.07 0C271.648 0 266.307 7.12285 266.307 14.2004C266.307 21.1496 271.474 28.0535 281.851 28.0535H284.822L277.812 32.6549V33.3079H280.069L286.15 27.6647L280.069 20.9344H277.812V21.5875L284.772 27.1891H281.806C272.992 27.1891 268.085 20.5872 268.085 14.1626C268.085 8.0401 272.512 2.04588 282.066 2.04588C291.359 2.04588 299.131 7.73435 299.131 19.1981H300C300.003 6.20937 291.839 0 282.07 0Z"
          fill="none"
          stroke="#E0D1B6"
          strokeWidth="1.2"
          strokeLinecap="round"
          strokeLinejoin="round"
        />
      </svg>
    </div>
  );
}
